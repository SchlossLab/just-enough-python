<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Kelly Sovacool">
<meta name="dcterms.date" content="2022-11-14">
<title>Just Enough Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="custom.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link active" href="./just-enough-python.html" aria-current="page">Home</a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/SchlossLab/just-enough-python/"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Just Enough Python</h1>
            <p class="subtitle lead">for writing advanced Snakemake workflows</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Kelly Sovacool </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2022-11-14</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#prereqs" id="toc-prereqs" class="nav-link active" data-scroll-target="#prereqs">prereqs</a></li>
  <li>
<a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables">variables</a>
  <ul>
<li>
<a href="#basic-types" id="toc-basic-types" class="nav-link" data-scroll-target="#basic-types">basic types</a>
  <ul>
<li><a href="#type-casting" id="toc-type-casting" class="nav-link" data-scroll-target="#type-casting">type casting</a></li>
  <li><a href="#naming-variables" id="toc-naming-variables" class="nav-link" data-scroll-target="#naming-variables">Naming variables</a></li>
  <li><a href="#formatting-strings" id="toc-formatting-strings" class="nav-link" data-scroll-target="#formatting-strings">formatting strings</a></li>
  </ul>
</li>
  <li>
<a href="#container-types" id="toc-container-types" class="nav-link" data-scroll-target="#container-types">container types</a>
  <ul>
<li>
<a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists">lists</a>
  <ul class="collapse">
<li><a href="#indexing" id="toc-indexing" class="nav-link" data-scroll-target="#indexing">Indexing</a></li>
  </ul>
</li>
  <li>
<a href="#dictionaries" id="toc-dictionaries" class="nav-link" data-scroll-target="#dictionaries">dictionaries</a>
  <ul class="collapse">
<li><a href="#snakemake-config" id="toc-snakemake-config" class="nav-link" data-scroll-target="#snakemake-config">Snakemake config</a></li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#conditionals" id="toc-conditionals" class="nav-link" data-scroll-target="#conditionals">conditionals</a>
  <ul>
<li>
<a href="#if-else-statements" id="toc-if-else-statements" class="nav-link" data-scroll-target="#if-else-statements">if-else statements</a>
  <ul>
<li><a href="#inline-if-else-statement" id="toc-inline-if-else-statement" class="nav-link" data-scroll-target="#inline-if-else-statement">inline if-else statement</a></li>
  <li><a href="#nested-if-else-blocks" id="toc-nested-if-else-blocks" class="nav-link" data-scroll-target="#nested-if-else-blocks">nested if-else blocks</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#for-loops" id="toc-for-loops" class="nav-link" data-scroll-target="#for-loops">for loops</a>
  <ul>
<li><a href="#range" id="toc-range" class="nav-link" data-scroll-target="#range">range</a></li>
  <li><a href="#iterate-over-dictionaries" id="toc-iterate-over-dictionaries" class="nav-link" data-scroll-target="#iterate-over-dictionaries">iterate over dictionaries</a></li>
  <li>
<a href="#comprehensions" id="toc-comprehensions" class="nav-link" data-scroll-target="#comprehensions">comprehensions</a>
  <ul>
<li>
<a href="#list-comprehensions" id="toc-list-comprehensions" class="nav-link" data-scroll-target="#list-comprehensions">list comprehensions</a>
  <ul class="collapse">
<li><a href="#snakemake-expand" id="toc-snakemake-expand" class="nav-link" data-scroll-target="#snakemake-expand">Snakemake expand</a></li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">functions</a>
  <ul>
<li><a href="#anonymous-functions" id="toc-anonymous-functions" class="nav-link" data-scroll-target="#anonymous-functions">anonymous functions</a></li>
  </ul>
</li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/SchlossLab/just-enough-python/edit/main/just-enough-python.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/SchlossLab/just-enough-python/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><div class="cell">

</div>
<p>Snakemake is a workflow management tool implemented as extra magic on top of Python. If you want to take your Snakemake workflows from beginner to advanced, learning a little Python goes a long way.</p>
<p>This is just enough Python to understand and apply some cool tricks in your Snakemake workflows.</p>
<section id="prereqs" class="level5"><h5 class="anchored" data-anchor-id="prereqs">prereqs</h5>
<ul>
<li>
<strong>Basic Snakemake knowledge.</strong> You’ve gone through <a href="https://snakemake.readthedocs.io/en/stable/tutorial/tutorial.html">the official tutorial</a>. Maybe you’ve even built your own snakemake workflow.</li>
<li>Minimal or <strong>no python knowledge</strong>, aside from what you may have gleaned from the snakemake docs.</li>
<li>
<strong>Basic R knowledge.</strong> Tidyverse experience is helpful but not required.</li>
</ul></section><section id="variables" class="level2"><h2 class="anchored" data-anchor-id="variables">variables</h2>
<section id="basic-types" class="level3"><h3 class="anchored" data-anchor-id="basic-types">basic types</h3>
<table class="table">
<thead><tr class="header">
<th>Python</th>
<th>R</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>string</td>
<td>character</td>
</tr>
<tr class="even">
<td>integer</td>
<td>integer</td>
</tr>
<tr class="odd">
<td>float</td>
<td>numeric</td>
</tr>
<tr class="even">
<td>boolean</td>
<td>logical</td>
</tr>
<tr class="odd">
<td>None</td>
<td>NULL</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># string</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>name <span class="op">=</span> <span class="st">"Kelly"</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>favorite_color <span class="op">=</span> <span class="st">'green'</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># float</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>height_inches <span class="op">=</span> <span class="fl">64.0</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># int</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>num_plants <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># bool</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>likes_cats <span class="op">=</span> <span class="va">True</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co"># none</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>invalid <span class="op">=</span> <span class="va">None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># character</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>name <span class="ot">&lt;-</span> <span class="st">"Kelly"</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>favorite_color <span class="ot">&lt;-</span> <span class="st">'green'</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># numeric</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>height_inches <span class="ot">&lt;-</span> <span class="dv">64</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co"># integer</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>num_plants <span class="ot">&lt;-</span> 14L</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co"># logical</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>likes_cats <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co"># null</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>invalid <span class="ot">=</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>A key difference is that in R, all of the above objects are <strong>vectors</strong> of length 1.</p>
<section id="type-casting" class="level4"><h4 class="anchored" data-anchor-id="type-casting">type casting</h4>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="bu">int</span>(<span class="fl">32.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>32</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="bu">float</span>(<span class="dv">32</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>32.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="bu">str</span>(<span class="dv">32</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'32'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="bu">bool</span>(<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="bu">bool</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="bu">bool</span>(<span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False</code></pre>
</div>
</div>
</section><section id="naming-variables" class="level4"><h4 class="anchored" data-anchor-id="naming-variables">Naming variables</h4>
<p>Biggest difference between R and Python: no dots are allowed in Python variable names. All other rules from R apply. Python variable names must start with an alphabetic character and they can contain alphanumeric characters and underscores.</p>
<p>Just like in R, it is a good idea not to name a variable the same thing as a reserved keyword or global function.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python keywords</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a><span class="bu">help</span>(<span class="st">"keywords"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Here is a list of the Python keywords.  Enter any keyword to get more help.

False               break               for                 not
None                class               from                or
True                continue            global              pass
__peg_parser__      def                 if                  raise
and                 del                 import              return
as                  elif                in                  try
assert              else                is                  while
async               except              lambda              with
await               finally             nonlocal            yield</code></pre>
</div>
</div>
</section><section id="formatting-strings" class="level4"><h4 class="anchored" data-anchor-id="formatting-strings">formatting strings</h4>
<p>You can add strings together to build new ones like this:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>firstname <span class="op">=</span> <span class="st">"Marie"</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>lastname <span class="op">=</span> <span class="st">"Curie"</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>middle_init <span class="op">=</span> <span class="st">'S'</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>prefix <span class="op">=</span> <span class="st">"Madame"</span></span>
<span id="cb17-5"><a href="#cb17-5"></a></span>
<span id="cb17-6"><a href="#cb17-6"></a>fullname <span class="op">=</span> prefix <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> firstname <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> middle_init <span class="op">+</span> <span class="st">". "</span> <span class="op">+</span> lastname</span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="bu">print</span>(fullname)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Madame Marie S. Curie</code></pre>
</div>
</div>
<p>The print function takes any number of arguments and will insert a space between items by default:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="bu">print</span>(prefix, firstname, middle_init <span class="op">+</span> <span class="st">"."</span>, lastname)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Madame Marie S. Curie</code></pre>
</div>
</div>
<p>But there’s a better way!</p>
<p><strong>f-Strings</strong> in Python work just like <code>glue()</code> in R, where curly braces in the string are interpreted as code. They’re much easier to read &amp; write:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="ss">f"</span><span class="sc">{</span>prefix<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>firstname<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>middle_init<span class="sc">}</span><span class="ss">. </span><span class="sc">{</span>lastname<span class="sc">}</span><span class="ss">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>'Madame Marie S. Curie'</code></pre>
</div>
</div>
<p>This is equivalent to:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>firstname <span class="ot">&lt;-</span> <span class="st">"Marie"</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>lastname <span class="ot">&lt;-</span> <span class="st">"Curie"</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>middle_init <span class="ot">&lt;-</span> <span class="st">'S'</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>prefix <span class="ot">&lt;-</span> <span class="st">"Madame"</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"{prefix} {firstname} {middle_init}. {lastname}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Madame Marie S. Curie</code></pre>
</div>
</div>
</section></section><section id="container-types" class="level3"><h3 class="anchored" data-anchor-id="container-types">container types</h3>
<table class="table">
<thead><tr class="header">
<th>Python</th>
<th>R</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>list</td>
<td>vector (all same type) or list (multiple types)</td>
</tr>
<tr class="even">
<td>dictionary</td>
<td>named list</td>
</tr>
<tr class="odd">
<td>dataframe (pandas)</td>
<td>dataframe (base) or tibble (tidyverse)</td>
</tr>
</tbody>
</table>
<section id="lists" class="level4"><h4 class="anchored" data-anchor-id="lists">lists</h4>
<p>Python lists are most similar to lists in R. Python lists can also be compared to vectors in R, but unlike vectors, lists can contain objects of different types.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a>fruit <span class="op">=</span> [<span class="st">'apple'</span>,<span class="st">'banana'</span>,<span class="st">'grape'</span>]</span>
<span id="cb25-2"><a href="#cb25-2"></a>my_list <span class="op">=</span> [<span class="st">'pizza'</span>, <span class="st">'fries'</span>, <span class="dv">3</span>, <span class="op">-</span><span class="fl">2.5</span>, <span class="st">'donuts'</span>]</span>
<span id="cb25-3"><a href="#cb25-3"></a>fruit <span class="op">+</span> my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>['apple', 'banana', 'grape', 'pizza', 'fries', 3, -2.5, 'donuts']</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>fruit.append(<span class="st">'mango'</span>)</span>
<span id="cb27-2"><a href="#cb27-2"></a>fruit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['apple', 'banana', 'grape', 'mango']</code></pre>
</div>
</div>
<section id="indexing" class="level5"><h5 class="anchored" data-anchor-id="indexing">Indexing</h5>
<p>Indexing is 0-based in Python. You can index lists and strings.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="bu">len</span>(numbers) <span class="co"># length</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a>numbers[<span class="dv">0</span>] <span class="co"># first item</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a>numbers[<span class="dv">3</span>] <span class="co"># last item</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a>numbers[<span class="op">-</span><span class="dv">1</span>] <span class="co"># last item</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4</code></pre>
</div>
</div>
<p>You might find 0-based indexing unintuitive if you’re used to working in languages like R that use 1-based indexing, but:</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>[this is] not mad, just differently sane! - Terry Pratchett - Greg Wilson[^From <em>The Tidynomicon</em> by Greg Wilson: https://tidynomicon.github.io/tidynomicon/]</p>
</blockquote>
</blockquote>
<p>Here’s an illustration that shows how 0-based &amp; 1-based indexing systems compare in the context of DNA coordinates<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://www.biostars.org/p/84686/"><img src="https://i.postimg.cc/yxxngrS5/single-nucleotide-or-variant.jpg" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">DNA indexing comparison</figcaption><p></p>
</figure>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a>dna <span class="op">=</span> <span class="st">"TACGTCA"</span></span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="bu">print</span>(dna[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>T</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a><span class="bu">print</span>(dna[<span class="dv">6</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A</code></pre>
</div>
</div>
<p>We can try to write equivalent code in R…</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>dna <span class="ot">&lt;-</span> <span class="st">"TACGTCA"</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="fu">print</span>(dna[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "TACGTCA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="fu">print</span>(dna[<span class="dv">7</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>But this doesn’t work! In the above R code, <code>dna</code> is a vector of length 1 with “TACGTCA” as the item at index 1. You can’t grab individual characters out of it. We have to break up the string into a vector with every character as a separate item in R.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>dna <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'T'</span>, <span class="st">'A'</span>, <span class="st">'C'</span>, <span class="st">'G'</span>, <span class="st">'T'</span>, <span class="st">'C'</span>, <span class="st">'A'</span>)</span>
<span id="cb45-2"><a href="#cb45-2"></a><span class="fu">print</span>(dna[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "T"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">print</span>(dna[[<span class="dv">7</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A"</code></pre>
</div>
</div>
</section></section><section id="dictionaries" class="level4"><h4 class="anchored" data-anchor-id="dictionaries">dictionaries</h4>
<p>Dictionaries consist of key-value pairs where you use the key to access the value. Keys can be strings, integers, floats, or booleans. Values can be anything!</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1"></a>foods <span class="op">=</span> {<span class="st">'vegetable'</span>: [<span class="st">'carrot'</span>, <span class="st">'eggplant'</span>], </span>
<span id="cb49-2"><a href="#cb49-2"></a>         <span class="st">'fruit'</span>: <span class="st">'cherry'</span>}</span>
<span id="cb49-3"><a href="#cb49-3"></a>foods[<span class="st">'fruit'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>'cherry'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a>foods[<span class="st">'vegetable'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['carrot', 'eggplant']</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1"></a>foods[<span class="st">'vegetable'</span>][<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'carrot'</code></pre>
</div>
</div>
<p>Dictionaries can be nested:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1"></a>hyperparams <span class="op">=</span> {<span class="st">'glmnet'</span>: {<span class="st">'alpha'</span>: [<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">1</span>],</span>
<span id="cb55-2"><a href="#cb55-2"></a>                          <span class="st">'lambda'</span>: [<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb55-3"><a href="#cb55-3"></a>                          },</span>
<span id="cb55-4"><a href="#cb55-4"></a>                <span class="st">'rf'</span>: {<span class="st">'mtry'</span>: [<span class="dv">128</span>, <span class="dv">256</span>, <span class="dv">512</span>]}</span>
<span id="cb55-5"><a href="#cb55-5"></a>               }</span>
<span id="cb55-6"><a href="#cb55-6"></a>hyperparams[<span class="st">'glmnet'</span>][<span class="st">'alpha'</span>][<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>0.5</code></pre>
</div>
</div>
<section id="snakemake-config" class="level5"><h5 class="anchored" data-anchor-id="snakemake-config">Snakemake config</h5>
<p>Say you have a Snakemake workflow for training machine learning models. You want to be able to specify different datasets, ML methods, and random seeds, so you use f-Strings to fill in these variables:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Snakefile</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1"></a>dataset <span class="op">=</span> <span class="st">"OTU"</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>method <span class="op">=</span> <span class="st">"rf"</span></span>
<span id="cb57-3"><a href="#cb57-3"></a>seed <span class="op">=</span> <span class="dv">1001</span></span>
<span id="cb57-4"><a href="#cb57-4"></a></span>
<span id="cb57-5"><a href="#cb57-5"></a>rule train_ml_model:</span>
<span id="cb57-6"><a href="#cb57-6"></a>    <span class="bu">input</span>:</span>
<span id="cb57-7"><a href="#cb57-7"></a>        R<span class="op">=</span><span class="st">"workflow/scripts/train_ml.R"</span>,</span>
<span id="cb57-8"><a href="#cb57-8"></a>        csv<span class="op">=</span><span class="ss">f"data/</span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">.csv"</span></span>
<span id="cb57-9"><a href="#cb57-9"></a>    output:</span>
<span id="cb57-10"><a href="#cb57-10"></a>        model<span class="op">=</span><span class="ss">f"results/</span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">/runs/</span><span class="sc">{</span>method<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>seed<span class="sc">}</span><span class="ss">_model.Rds"</span></span>
<span id="cb57-11"><a href="#cb57-11"></a>    script:</span>
<span id="cb57-12"><a href="#cb57-12"></a>        <span class="co">"scripts/train_ml.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>You can improve this by creating a configuration file in YAML format:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>config/otu.yml</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>dataset<span class="sc">:</span> <span class="st">'OTU'</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>method<span class="sc">:</span> <span class="st">'rf'</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>seed<span class="sc">:</span> <span class="dv">1001</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Then specify your config file at the top of your Snakefile. Snakemake parses your YAML config files to a dictionary called <code>config</code>.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Snakefile</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1"></a>configfile: <span class="st">"config/otu.yml"</span></span>
<span id="cb59-2"><a href="#cb59-2"></a></span>
<span id="cb59-3"><a href="#cb59-3"></a>dataset <span class="op">=</span> config[<span class="st">"dataset"</span>]</span>
<span id="cb59-4"><a href="#cb59-4"></a>method <span class="op">=</span> config[<span class="st">'rf'</span>]</span>
<span id="cb59-5"><a href="#cb59-5"></a>seed <span class="op">=</span> config[<span class="st">'seed'</span>]</span>
<span id="cb59-6"><a href="#cb59-6"></a></span>
<span id="cb59-7"><a href="#cb59-7"></a>rule train_ml_model:</span>
<span id="cb59-8"><a href="#cb59-8"></a>    <span class="bu">input</span>:</span>
<span id="cb59-9"><a href="#cb59-9"></a>        R<span class="op">=</span><span class="st">"workflow/scripts/train_ml.R"</span>,</span>
<span id="cb59-10"><a href="#cb59-10"></a>        csv<span class="op">=</span><span class="ss">f"data/</span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">.csv"</span></span>
<span id="cb59-11"><a href="#cb59-11"></a>    output:</span>
<span id="cb59-12"><a href="#cb59-12"></a>        model<span class="op">=</span><span class="ss">f"results/</span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">/runs/</span><span class="sc">{</span>method<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>seed<span class="sc">}</span><span class="ss">_model.Rds"</span></span>
<span id="cb59-13"><a href="#cb59-13"></a>    script:</span>
<span id="cb59-14"><a href="#cb59-14"></a>        <span class="co">"scripts/train_ml.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>When you run this workflow, it uses <code>config/otu.yml</code> by default:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>sh</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1"></a><span class="ex">snakemake</span> <span class="at">-n</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1"></a><span class="ex">rule</span> train_ml_model:</span>
<span id="cb61-2"><a href="#cb61-2"></a>    <span class="ex">input:</span> workflow/scripts/train_ml.R, data/OTU.csv</span>
<span id="cb61-3"><a href="#cb61-3"></a>    <span class="ex">output:</span> results/OTU/runs/rf_1001_model.Rds</span>
<span id="cb61-4"><a href="#cb61-4"></a>    <span class="ex">jobid:</span> 0</span>
<span id="cb61-5"><a href="#cb61-5"></a>    <span class="ex">reason:</span> Missing output files: results/OTU/runs/rf_1001_model.Rds</span>
<span id="cb61-6"><a href="#cb61-6"></a>    <span class="ex">resources:</span> tmpdir=/var/folders/9n/glrhxtfx453gl68sc1gzq0mc0000gr/T</span>
<span id="cb61-7"><a href="#cb61-7"></a></span>
<span id="cb61-8"><a href="#cb61-8"></a><span class="ex">Job</span> stats:</span>
<span id="cb61-9"><a href="#cb61-9"></a><span class="ex">job</span>               count    min threads    max threads</span>
<span id="cb61-10"><a href="#cb61-10"></a><span class="ex">--------------</span>  <span class="at">-------</span>  <span class="at">-------------</span>  <span class="at">-------------</span></span>
<span id="cb61-11"><a href="#cb61-11"></a><span class="ex">train_ml_model</span>        1              1              1</span>
<span id="cb61-12"><a href="#cb61-12"></a><span class="ex">total</span>                 1              1              1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now you can change the values of these variables by editing the config file, or by creating multiple config files and specifying them on the command line:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>config/genus.yml</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>dataset<span class="sc">:</span> <span class="st">'genus'</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>method<span class="sc">:</span> <span class="st">'glmnet'</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>seed<span class="sc">:</span> <span class="dv">1001</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>sh</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1"></a><span class="ex">snakemake</span> <span class="at">-n</span> <span class="at">--configfile</span> config/genus.yml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1"></a><span class="ex">rule</span> train_ml_model:</span>
<span id="cb64-2"><a href="#cb64-2"></a>    <span class="ex">input:</span> workflow/scripts/train_ml.R, data/genus.csv</span>
<span id="cb64-3"><a href="#cb64-3"></a>    <span class="ex">output:</span> results/genus/runs/glmnet_1001_model.Rds</span>
<span id="cb64-4"><a href="#cb64-4"></a>    <span class="ex">jobid:</span> 0</span>
<span id="cb64-5"><a href="#cb64-5"></a>    <span class="ex">reason:</span> Missing output files: results/genus/runs/glmnet_1001_model.Rds</span>
<span id="cb64-6"><a href="#cb64-6"></a>    <span class="ex">resources:</span> tmpdir=/var/folders/9n/glrhxtfx453gl68sc1gzq0mc0000gr/T</span>
<span id="cb64-7"><a href="#cb64-7"></a></span>
<span id="cb64-8"><a href="#cb64-8"></a><span class="ex">Job</span> stats:</span>
<span id="cb64-9"><a href="#cb64-9"></a><span class="ex">job</span>               count    min threads    max threads</span>
<span id="cb64-10"><a href="#cb64-10"></a><span class="ex">--------------</span>  <span class="at">-------</span>  <span class="at">-------------</span>  <span class="at">-------------</span></span>
<span id="cb64-11"><a href="#cb64-11"></a><span class="ex">train_ml_model</span>        1              1              1</span>
<span id="cb64-12"><a href="#cb64-12"></a><span class="ex">total</span>                 1              1              1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>See this example in context <a href="">here</a>.</p>
</section></section></section></section><section id="conditionals" class="level2"><h2 class="anchored" data-anchor-id="conditionals">conditionals</h2>
<p>Think of these as functions that return a boolean.</p>
<table class="table">
<thead><tr class="header">
<th>operator</th>
<th>meaning</th>
<th>same in R</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>==</code></td>
<td>equal</td>
<td>✅</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>not equal</td>
<td>✅</td>
</tr>
<tr class="odd">
<td><code>&lt;</code></td>
<td>less than</td>
<td>✅</td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>greater than</td>
<td>✅</td>
</tr>
<tr class="odd">
<td><code>&lt;=</code></td>
<td>less than or equal to</td>
<td>✅</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>greater than or equal to</td>
<td>✅</td>
</tr>
<tr class="odd">
<td>or</td>
<td>or (inclusive)</td>
<td><code>|</code></td>
</tr>
<tr class="even">
<td>and</td>
<td>and</td>
<td><code>&amp;</code></td>
</tr>
<tr class="odd">
<td>in</td>
<td>in</td>
<td><code>%in%</code></td>
</tr>
<tr class="even">
<td>not</td>
<td>not</td>
<td><code>!</code></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1"></a><span class="dv">3</span> <span class="op">&gt;</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1"></a><span class="va">True</span> <span class="kw">or</span> <span class="va">False</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
</div>
<section id="if-else-statements" class="level3"><h3 class="anchored" data-anchor-id="if-else-statements">if-else statements</h3>
<p>No curly braces here! But indentation does matter.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1"></a><span class="cf">if</span> <span class="bu">len</span>(my_list) <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb69-2"><a href="#cb69-2"></a>    list_description <span class="op">=</span> <span class="st">"This list is short"</span></span>
<span id="cb69-3"><a href="#cb69-3"></a><span class="cf">elif</span> <span class="bu">len</span>(my_list) <span class="op">&gt;=</span> <span class="dv">10</span> <span class="kw">and</span> <span class="bu">len</span>(my_list) <span class="op">&lt;</span> <span class="dv">15</span>:</span>
<span id="cb69-4"><a href="#cb69-4"></a>    list_description <span class="op">=</span> <span class="st">"This list is medium length"</span></span>
<span id="cb69-5"><a href="#cb69-5"></a><span class="cf">else</span>:</span>
<span id="cb69-6"><a href="#cb69-6"></a>    list_description <span class="op">=</span> <span class="st">"This list is long!"</span></span>
<span id="cb69-7"><a href="#cb69-7"></a><span class="bu">print</span>(list_description)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>This list is short</code></pre>
</div>
</div>
<section id="inline-if-else-statement" class="level4"><h4 class="anchored" data-anchor-id="inline-if-else-statement">inline if-else statement</h4>
<p>When you create a variable with an if-else statement, you can do it all on one line:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1"></a>list_description <span class="op">=</span> <span class="st">"short"</span> <span class="cf">if</span> <span class="bu">len</span>(my_list) <span class="op">&lt;</span> <span class="dv">10</span> <span class="cf">else</span> <span class="st">"not short"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is equivalent to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1"></a><span class="cf">if</span> <span class="bu">len</span>(my_list) <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb72-2"><a href="#cb72-2"></a>    list_description <span class="op">=</span> <span class="st">"short"</span></span>
<span id="cb72-3"><a href="#cb72-3"></a><span class="cf">else</span>:</span>
<span id="cb72-4"><a href="#cb72-4"></a>    list_description <span class="op">=</span> <span class="st">"not short"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can’t make it a one-liner if you need to use <code>elif</code>.</p>
</section><section id="nested-if-else-blocks" class="level4"><h4 class="anchored" data-anchor-id="nested-if-else-blocks">nested if-else blocks</h4>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1"></a>num <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb73-2"><a href="#cb73-2"></a><span class="cf">if</span> num <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb73-3"><a href="#cb73-3"></a>    <span class="cf">if</span> num <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb73-4"><a href="#cb73-4"></a>        <span class="bu">print</span>(<span class="st">"zero"</span>)</span>
<span id="cb73-5"><a href="#cb73-5"></a>    <span class="cf">else</span>:</span>
<span id="cb73-6"><a href="#cb73-6"></a>        <span class="bu">print</span>(<span class="st">"positive"</span>)</span>
<span id="cb73-7"><a href="#cb73-7"></a><span class="cf">else</span>:</span>
<span id="cb73-8"><a href="#cb73-8"></a>    <span class="bu">print</span>(<span class="st">"negative"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>positive</code></pre>
</div>
</div>
</section></section></section><section id="for-loops" class="level2"><h2 class="anchored" data-anchor-id="for-loops">for loops</h2>
<p>If a variable has a length (i.e.&nbsp;you can run <code>len(myvar)</code>), then you can <strong>iterate</strong> over it in a for loop.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1"></a>postdocs <span class="op">=</span> [<span class="st">'Allison Mason'</span>, <span class="st">'Courtney Armour'</span>, <span class="st">'Sarah Lucas'</span>]</span>
<span id="cb75-2"><a href="#cb75-2"></a><span class="cf">for</span> person <span class="kw">in</span> postdocs:</span>
<span id="cb75-3"><a href="#cb75-3"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>person<span class="sc">}</span><span class="ss">, PhD"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Allison Mason, PhD
Courtney Armour, PhD
Sarah Lucas, PhD</code></pre>
</div>
</div>
<section id="range" class="level3"><h3 class="anchored" data-anchor-id="range">range</h3>
<p>Use <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> to loop over a range of numbers. If you give <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> two arguments, range starts counting from the first argument and stops <em>just before</em> the second argument, stepping by 1. In other words, the stop argument is <em>exclusive</em>.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1"></a>num_bottles <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb77-2"><a href="#cb77-2"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, num_bottles<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb77-3"><a href="#cb77-3"></a>    <span class="bu">print</span>(i, <span class="st">" bottles of pop on the wall"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>1  bottles of pop on the wall
2  bottles of pop on the wall
3  bottles of pop on the wall</code></pre>
</div>
</div>
<p>If you give range just one argument, it starts counting from zero and uses the argument as the stop value:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1"></a>num_bottles <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb79-2"><a href="#cb79-2"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_bottles<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb79-3"><a href="#cb79-3"></a>    <span class="bu">print</span>(i, <span class="st">" bottles of pop on the wall"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>0  bottles of pop on the wall
1  bottles of pop on the wall
2  bottles of pop on the wall
3  bottles of pop on the wall</code></pre>
</div>
</div>
<p>You can also use <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> to create lists:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1"></a>mylist <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">3</span>))</span>
<span id="cb81-2"><a href="#cb81-2"></a>mylist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[0, 1, 2]</code></pre>
</div>
</div>
<p>You can use range with three arguments: <code>start</code>, <code>stop</code>, and <code>step</code>:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1"></a><span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">2</span>, <span class="dv">11</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[2, 4, 6, 8, 10]</code></pre>
</div>
</div>
<p>Give the <code>step</code> argument a negative value and make <code>start</code> greater than <code>stop</code> to move backwards:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1"></a><span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">4</span>, <span class="op">-</span><span class="dv">7</span>, <span class="op">-</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[4, 2, 0, -2, -4, -6]</code></pre>
</div>
</div>
<p>You might think it’s weird that range stops just <em>before</em> the stop value. But it works nicely when you give it the length of the list – now you have the list indices!</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</span>
<span id="cb87-2"><a href="#cb87-2"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(numbers)):</span>
<span id="cb87-3"><a href="#cb87-3"></a>    <span class="bu">print</span>(<span class="ss">f"index </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>numbers[i]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>index 0 is 1
index 1 is 2
index 2 is 3
index 3 is 4</code></pre>
</div>
</div>
</section><section id="iterate-over-dictionaries" class="level3"><h3 class="anchored" data-anchor-id="iterate-over-dictionaries">iterate over dictionaries</h3>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1"></a>problems <span class="op">=</span> {<span class="dv">1</span>: <span class="st">"naming things"</span>, <span class="dv">2</span>: <span class="st">"understanding binary"</span>, <span class="dv">3</span>: <span class="st">"off-by-one errors"</span>}</span>
<span id="cb89-2"><a href="#cb89-2"></a><span class="bu">print</span>(<span class="st">'There are only 10 hard problems in computer science:'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>There are only 10 hard problems in computer science:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1"></a><span class="cf">for</span> num <span class="kw">in</span> problems:</span>
<span id="cb91-2"><a href="#cb91-2"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, num, problems[num])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 naming things
     2 understanding binary
     3 off-by-one errors</code></pre>
</div>
</div>
</section><section id="comprehensions" class="level3"><h3 class="anchored" data-anchor-id="comprehensions">comprehensions</h3>
<p>When you want to make a for loop that creates a new list, dictionary, or set, use a <strong>comprehension</strong>. I’m only going to cover list comprehensions below, but you can learn about dictionary and set comprehensions <a href="./just-a-little-more-python.html#more-comprehensions">here</a>.</p>
<section id="list-comprehensions" class="level4"><h4 class="anchored" data-anchor-id="list-comprehensions">list comprehensions</h4>
<p>To build a list with a for loop, you can do this</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1"></a>squares <span class="op">=</span> []</span>
<span id="cb93-2"><a href="#cb93-2"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>):</span>
<span id="cb93-3"><a href="#cb93-3"></a>    squares.append(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb93-4"><a href="#cb93-4"></a>squares</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[0, 1, 4, 9]</code></pre>
</div>
</div>
<p>but a list comprehension is much sleeker and performs faster:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1"></a>squares <span class="op">=</span> [i<span class="op">**</span><span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>this is roughly equivalent to using *apply functions in R:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a><span class="fu">sapply</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) {x<span class="sc">**</span><span class="dv">2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 1 4 9</code></pre>
</div>
</div>
<section id="snakemake-expand" class="level5"><h5 class="anchored" data-anchor-id="snakemake-expand">Snakemake expand</h5>
<p>Let’s say you have a Snakemake workflow with a rule that should run multiple times with different parameters. For example, you may want to train machine learning models with different ML methods, datasets, and random seeds. You define these as <code>wildcards</code> in a rule to train each ML model:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Snakefile</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1"></a>rule train_ml_model:</span>
<span id="cb98-2"><a href="#cb98-2"></a>    <span class="bu">input</span>:</span>
<span id="cb98-3"><a href="#cb98-3"></a>        R<span class="op">=</span><span class="st">"workflow/scripts/train_ml.R"</span>,</span>
<span id="cb98-4"><a href="#cb98-4"></a>        csv<span class="op">=</span><span class="st">"data/</span><span class="sc">{dataset}</span><span class="st">.csv"</span></span>
<span id="cb98-5"><a href="#cb98-5"></a>    output:</span>
<span id="cb98-6"><a href="#cb98-6"></a>        model<span class="op">=</span><span class="st">"results/</span><span class="sc">{dataset}</span><span class="st">/runs/</span><span class="sc">{method}</span><span class="st">_</span><span class="sc">{seed}</span><span class="st">_model.Rds"</span></span>
<span id="cb98-7"><a href="#cb98-7"></a>    script:</span>
<span id="cb98-8"><a href="#cb98-8"></a>        <span class="co">"scripts/train_ml.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Notice that we’re <em>not</em> using <strong>f-Strings</strong> within the rule because we want Snakemake to recognize these as <strong>wildcards</strong> and fill in different values for them with each run of the <code>train_ml_model</code> rule.</p>
<p>To tell Snakemake what values to assign for these wildcards, you can create lists with the values you want and write a target rule at the top of your Snakefile.</p>
<p>Here, you could use an f-String and a list comprehension to create the list of target files.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1"></a>datasets <span class="op">=</span> [<span class="st">'OTU'</span>, <span class="st">'genus'</span>]</span>
<span id="cb99-2"><a href="#cb99-2"></a>methods <span class="op">=</span> [<span class="st">'rf'</span>, <span class="st">'glmnet'</span>, <span class="st">'svmRadial'</span>]</span>
<span id="cb99-3"><a href="#cb99-3"></a>seeds <span class="op">=</span> <span class="bu">range</span>(<span class="dv">1000</span>, <span class="dv">1005</span>)</span>
<span id="cb99-4"><a href="#cb99-4"></a>[<span class="ss">f"results/</span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">/runs/</span><span class="sc">{</span>method<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>seed<span class="sc">}</span><span class="ss">_model.Rds"</span> <span class="cf">for</span> dataset <span class="kw">in</span> datasets <span class="cf">for</span> method <span class="kw">in</span> methods <span class="cf">for</span> seed <span class="kw">in</span> seeds]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>['results/OTU/runs/rf_1000_model.Rds', 'results/OTU/runs/rf_1001_model.Rds', 'results/OTU/runs/rf_1002_model.Rds', 'results/OTU/runs/rf_1003_model.Rds', 'results/OTU/runs/rf_1004_model.Rds', 'results/OTU/runs/glmnet_1000_model.Rds', 'results/OTU/runs/glmnet_1001_model.Rds', 'results/OTU/runs/glmnet_1002_model.Rds', 'results/OTU/runs/glmnet_1003_model.Rds', 'results/OTU/runs/glmnet_1004_model.Rds', 'results/OTU/runs/svmRadial_1000_model.Rds', 'results/OTU/runs/svmRadial_1001_model.Rds', 'results/OTU/runs/svmRadial_1002_model.Rds', 'results/OTU/runs/svmRadial_1003_model.Rds', 'results/OTU/runs/svmRadial_1004_model.Rds', 'results/genus/runs/rf_1000_model.Rds', 'results/genus/runs/rf_1001_model.Rds', 'results/genus/runs/rf_1002_model.Rds', 'results/genus/runs/rf_1003_model.Rds', 'results/genus/runs/rf_1004_model.Rds', 'results/genus/runs/glmnet_1000_model.Rds', 'results/genus/runs/glmnet_1001_model.Rds', 'results/genus/runs/glmnet_1002_model.Rds', 'results/genus/runs/glmnet_1003_model.Rds', 'results/genus/runs/glmnet_1004_model.Rds', 'results/genus/runs/svmRadial_1000_model.Rds', 'results/genus/runs/svmRadial_1001_model.Rds', 'results/genus/runs/svmRadial_1002_model.Rds', 'results/genus/runs/svmRadial_1003_model.Rds', 'results/genus/runs/svmRadial_1004_model.Rds']</code></pre>
</div>
</div>
<p>Here’s what your Snakefile looks like now.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Snakefile</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1"></a>datasets <span class="op">=</span> [<span class="st">'OTU'</span>, <span class="st">'genus'</span>]</span>
<span id="cb101-2"><a href="#cb101-2"></a>methods <span class="op">=</span> [<span class="st">'rf'</span>, <span class="st">'glmnet'</span>, <span class="st">'svmRadial'</span>]</span>
<span id="cb101-3"><a href="#cb101-3"></a>seeds <span class="op">=</span> <span class="bu">range</span>(<span class="dv">1000</span>, <span class="dv">1005</span>)</span>
<span id="cb101-4"><a href="#cb101-4"></a></span>
<span id="cb101-5"><a href="#cb101-5"></a>rule targets:</span>
<span id="cb101-6"><a href="#cb101-6"></a>    <span class="bu">input</span>:</span>
<span id="cb101-7"><a href="#cb101-7"></a>        [<span class="ss">f"results/</span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">/runs/</span><span class="sc">{</span>method<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>seed<span class="sc">}</span><span class="ss">_model.Rds"</span> <span class="cf">for</span> dataset <span class="kw">in</span> datasets <span class="cf">for</span> method <span class="kw">in</span> methods <span class="cf">for</span> seed <span class="kw">in</span> seeds]</span>
<span id="cb101-8"><a href="#cb101-8"></a></span>
<span id="cb101-9"><a href="#cb101-9"></a>rule train_ml_model:</span>
<span id="cb101-10"><a href="#cb101-10"></a>    <span class="bu">input</span>:</span>
<span id="cb101-11"><a href="#cb101-11"></a>        R<span class="op">=</span><span class="st">"workflow/scripts/train_ml.R"</span>,</span>
<span id="cb101-12"><a href="#cb101-12"></a>        csv<span class="op">=</span><span class="ss">f"data/</span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">.csv"</span></span>
<span id="cb101-13"><a href="#cb101-13"></a>    output:</span>
<span id="cb101-14"><a href="#cb101-14"></a>        model<span class="op">=</span><span class="st">"results/</span><span class="sc">{dataset}</span><span class="st">/runs/</span><span class="sc">{method}</span><span class="st">_</span><span class="sc">{seed}</span><span class="st">_model.Rds"</span></span>
<span id="cb101-15"><a href="#cb101-15"></a>    script:</span>
<span id="cb101-16"><a href="#cb101-16"></a>        <span class="co">"scripts/train_ml.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The list comprehension gets harder to read the more <code>for</code> statements you add to it. So Snakemake provides a function <code>expand()</code> to clean this up:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Snakefile</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1"></a>datasets <span class="op">=</span> [<span class="st">'OTU'</span>, <span class="st">'genus'</span>]</span>
<span id="cb102-2"><a href="#cb102-2"></a>methods <span class="op">=</span> [<span class="st">'rf'</span>, <span class="st">'glmnet'</span>, <span class="st">'svmRadial'</span>]</span>
<span id="cb102-3"><a href="#cb102-3"></a>seeds <span class="op">=</span> <span class="bu">range</span>(<span class="dv">1000</span>, <span class="dv">1005</span>)</span>
<span id="cb102-4"><a href="#cb102-4"></a></span>
<span id="cb102-5"><a href="#cb102-5"></a>rule targets:</span>
<span id="cb102-6"><a href="#cb102-6"></a>    <span class="bu">input</span>:</span>
<span id="cb102-7"><a href="#cb102-7"></a>        expand(<span class="st">"results/</span><span class="sc">{dataset}</span><span class="st">/runs/</span><span class="sc">{method}</span><span class="st">_</span><span class="sc">{seed}</span><span class="st">_model.Rds"</span>, </span>
<span id="cb102-8"><a href="#cb102-8"></a>                dataset <span class="op">=</span> datasets, method <span class="op">=</span> methods, seed <span class="op">=</span> seeds)</span>
<span id="cb102-9"><a href="#cb102-9"></a></span>
<span id="cb102-10"><a href="#cb102-10"></a>rule train_ml_model:</span>
<span id="cb102-11"><a href="#cb102-11"></a>    <span class="bu">input</span>:</span>
<span id="cb102-12"><a href="#cb102-12"></a>        R<span class="op">=</span><span class="st">"workflow/scripts/train_ml.R"</span></span>
<span id="cb102-13"><a href="#cb102-13"></a>    output:</span>
<span id="cb102-14"><a href="#cb102-14"></a>        model<span class="op">=</span><span class="st">"results/</span><span class="sc">{dataset}</span><span class="st">/runs/</span><span class="sc">{method}</span><span class="st">_</span><span class="sc">{seed}</span><span class="st">_model.Rds"</span></span>
<span id="cb102-15"><a href="#cb102-15"></a>    script:</span>
<span id="cb102-16"><a href="#cb102-16"></a>        <span class="co">"scripts/train_ml.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Using <code>expand()</code> creates the exact same list as the list comprehension, but it’s much easier to read and add variables to.</p>
</section></section></section></section><section id="functions" class="level2"><h2 class="anchored" data-anchor-id="functions">functions</h2>
<p>in R:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a>square <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb103-2"><a href="#cb103-2"></a>    <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb103-3"><a href="#cb103-3"></a>}</span>
<span id="cb103-4"><a href="#cb103-4"></a></span>
<span id="cb103-5"><a href="#cb103-5"></a><span class="fu">square</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>in Python:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1"></a><span class="kw">def</span> square(x):</span>
<span id="cb105-2"><a href="#cb105-2"></a>    <span class="cf">return</span> x<span class="op">**</span><span class="dv">2</span></span>
<span id="cb105-3"><a href="#cb105-3"></a></span>
<span id="cb105-4"><a href="#cb105-4"></a>square(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>4</code></pre>
</div>
</div>
<section id="anonymous-functions" class="level3"><h3 class="anchored" data-anchor-id="anonymous-functions">anonymous functions</h3>
<p>Sometimes you want to write a simple function that you only use once. They’re so inconsequential you don’t even want to give them a name.</p>
<p>We’ve already used one in R<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> inside <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code>:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a><span class="cf">function</span>(x) { x<span class="sc">**</span><span class="dv">2</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>function(x) { x**2 }</code></pre>
</div>
</div>
<p>in Python you use the <code>lambda</code> keyword:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Python</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1"></a><span class="kw">lambda</span> x: x<span class="op">**</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;function &lt;lambda&gt; at 0x10ceeb940&gt;</code></pre>
</div>
</div>
<p>Before the colon, list the arguments of the function. After the colon, compute the value that the function should return.</p>
<p>When writing Snakemake workflows, lambda functions are useful for defining input files based on the wildcards in output files. Consider a workflow where you have several rules that plot figures for a manuscript. When you initially conduct the analysis, you don’t know how the figures will be ordered in the manuscript. Once you begin drafting the manuscript, you decide that your diversity plot will be figure 1 and your error rates plot will be figure 2. You also decide to convert the figures to a different format, so the conversion step seems like a good opportunity to rename the figures. Initially you write this workflow:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Snakefile</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1"></a>rule targets:</span>
<span id="cb111-2"><a href="#cb111-2"></a>    <span class="bu">input</span>:</span>
<span id="cb111-3"><a href="#cb111-3"></a>        <span class="co">"paper/paper.pdf"</span></span>
<span id="cb111-4"><a href="#cb111-4"></a></span>
<span id="cb111-5"><a href="#cb111-5"></a>rule convert_figure_1:</span>
<span id="cb111-6"><a href="#cb111-6"></a>    <span class="bu">input</span>:</span>
<span id="cb111-7"><a href="#cb111-7"></a>        tiff<span class="op">=</span><span class="st">'figures/diversity.tiff'</span></span>
<span id="cb111-8"><a href="#cb111-8"></a>    output:</span>
<span id="cb111-9"><a href="#cb111-9"></a>        png<span class="op">=</span><span class="st">"paper/figure_1.png"</span></span>
<span id="cb111-10"><a href="#cb111-10"></a>    shell:</span>
<span id="cb111-11"><a href="#cb111-11"></a>        <span class="co">"""</span></span>
<span id="cb111-12"><a href="#cb111-12"></a><span class="co">        convert {input.tiff} {output.png}</span></span>
<span id="cb111-13"><a href="#cb111-13"></a><span class="co">        """</span></span>
<span id="cb111-14"><a href="#cb111-14"></a></span>
<span id="cb111-15"><a href="#cb111-15"></a>rule convert_figure_2:</span>
<span id="cb111-16"><a href="#cb111-16"></a>    <span class="bu">input</span>:</span>
<span id="cb111-17"><a href="#cb111-17"></a>        tiff<span class="op">=</span><span class="st">'figures/error_rates.tiff'</span></span>
<span id="cb111-18"><a href="#cb111-18"></a>    output:</span>
<span id="cb111-19"><a href="#cb111-19"></a>        png<span class="op">=</span><span class="st">"paper/figure_2.png"</span></span>
<span id="cb111-20"><a href="#cb111-20"></a>    shell:</span>
<span id="cb111-21"><a href="#cb111-21"></a>        <span class="co">"""</span></span>
<span id="cb111-22"><a href="#cb111-22"></a><span class="co">        convert {input.tiff} {output.png}</span></span>
<span id="cb111-23"><a href="#cb111-23"></a><span class="co">        """</span></span>
<span id="cb111-24"><a href="#cb111-24"></a></span>
<span id="cb111-25"><a href="#cb111-25"></a>rule render_paper:</span>
<span id="cb111-26"><a href="#cb111-26"></a>    <span class="bu">input</span>:</span>
<span id="cb111-27"><a href="#cb111-27"></a>        Rmd<span class="op">=</span><span class="st">"paper/paper.Rmd"</span>,</span>
<span id="cb111-28"><a href="#cb111-28"></a>        R<span class="op">=</span><span class="st">"workflow/scripts/render_rmd.R"</span>,</span>
<span id="cb111-29"><a href="#cb111-29"></a>        figures<span class="op">=</span>[<span class="st">'paper/figure_1.png'</span>, <span class="st">'paper/figure_2.png'</span>]</span>
<span id="cb111-30"><a href="#cb111-30"></a>    output:</span>
<span id="cb111-31"><a href="#cb111-31"></a>        pdf<span class="op">=</span><span class="st">"paper/paper.pdf"</span></span>
<span id="cb111-32"><a href="#cb111-32"></a>    script:</span>
<span id="cb111-33"><a href="#cb111-33"></a>        <span class="co">"scripts/render_rmd.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The rules <code>convert_figure_1</code> and <code>convert_figure_2</code> are a bit repetitive; they only differ by the input filenames and the figure numbers in the output filenames. Maybe this isn’t so bad with only two figures, but you might actually have 5-10 figures for a full scientific paper. We can reduce the repetitive code with a few tricks:</p>
<ol type="1">
<li>Create a dictionary that maps the figure numbers to the descriptive figure file names.</li>
<li>Use a single rule to convert figures, using a lambda function to get the input figure filenames based on the final figure numbers.</li>
</ol>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Snakefile</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1"></a>figures_dict <span class="op">=</span> {<span class="dv">1</span>: <span class="st">'diversity'</span>, <span class="dv">2</span>: <span class="st">'error_rates'</span>}</span>
<span id="cb112-2"><a href="#cb112-2"></a></span>
<span id="cb112-3"><a href="#cb112-3"></a>rule targets:</span>
<span id="cb112-4"><a href="#cb112-4"></a>    <span class="bu">input</span>:</span>
<span id="cb112-5"><a href="#cb112-5"></a>        <span class="co">"paper/paper.pdf"</span></span>
<span id="cb112-6"><a href="#cb112-6"></a></span>
<span id="cb112-7"><a href="#cb112-7"></a>rule convert_tiff_to_png:</span>
<span id="cb112-8"><a href="#cb112-8"></a>    <span class="bu">input</span>:</span>
<span id="cb112-9"><a href="#cb112-9"></a>        tiff<span class="op">=</span><span class="kw">lambda</span> wildcards: <span class="ss">f"figures/</span><span class="sc">{</span>figures_dict[<span class="bu">int</span>(wildcards.fig_num)]<span class="sc">}</span><span class="ss">.tiff"</span></span>
<span id="cb112-10"><a href="#cb112-10"></a>    output:</span>
<span id="cb112-11"><a href="#cb112-11"></a>        png<span class="op">=</span><span class="st">"paper/figure_</span><span class="sc">{fig_num}</span><span class="st">.png"</span></span>
<span id="cb112-12"><a href="#cb112-12"></a>    shell:</span>
<span id="cb112-13"><a href="#cb112-13"></a>        <span class="co">"""</span></span>
<span id="cb112-14"><a href="#cb112-14"></a><span class="co">        convert {input.tiff} {output.png}</span></span>
<span id="cb112-15"><a href="#cb112-15"></a><span class="co">        """</span></span>
<span id="cb112-16"><a href="#cb112-16"></a></span>
<span id="cb112-17"><a href="#cb112-17"></a>rule render_paper:</span>
<span id="cb112-18"><a href="#cb112-18"></a>    <span class="bu">input</span>:</span>
<span id="cb112-19"><a href="#cb112-19"></a>        Rmd<span class="op">=</span><span class="st">"paper/paper.Rmd"</span>,</span>
<span id="cb112-20"><a href="#cb112-20"></a>        R<span class="op">=</span><span class="st">"workflow/scripts/render_rmd.R"</span>,</span>
<span id="cb112-21"><a href="#cb112-21"></a>        figures<span class="op">=</span>expand(rules.convert_tiff_to_png.output.png, </span>
<span id="cb112-22"><a href="#cb112-22"></a>                       fig_num <span class="op">=</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(figures_dict)<span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb112-23"><a href="#cb112-23"></a>    output:</span>
<span id="cb112-24"><a href="#cb112-24"></a>        pdf<span class="op">=</span><span class="st">"paper/paper.pdf"</span></span>
<span id="cb112-25"><a href="#cb112-25"></a>    script:</span>
<span id="cb112-26"><a href="#cb112-26"></a>        <span class="co">"scripts/render_rmd.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>This lambda function is equivalent to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1"></a><span class="kw">def</span> get_fig_name_from_num(wildcards):</span>
<span id="cb113-2"><a href="#cb113-2"></a>    <span class="cf">return</span> figures_dict[<span class="bu">int</span>(wildcards.fig_num)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>See this full example in context <a href="https://github.com/kelly-sovacool/figure-convert-reprex">here</a>. Learn more about input functions <a href="https://snakemake.readthedocs.io/en/stable/snakefiles/rules.html#snakefiles-input-functions">here</a> and params functions <a href="https://snakemake.readthedocs.io/en/stable/snakefiles/rules.html#non-file-parameters-for-rules">here</a>.</p>
</section></section><section id="recap" class="level1"><h1>Recap</h1>
<p><strong>Snakemake concepts covered</strong></p>
<ul>
<li>Use f-Strings for readable string formatting.</li>
<li>Config files are imported as dictionaries and allow you to change workflow parameters without modifying code.</li>
<li>Lambda functions help define Snakemake input files and parameters based on output files and wildcards.</li>
</ul></section><div id="quarto-appendix" class="default"><section id="resources" class="level1 appendix"><h2 class="quarto-appendix-heading">Resources</h2><div class="quarto-appendix-contents">
<ul>
<li>
<a href="./just-a-little-more-python.html">Just A Little More Python</a>: topics I wish I had time to cover in this tutorial.</li>
<li><a href="https://docs.python.org/3/">The Python docs</a></li>
<li><a href="https://snakemake.readthedocs.io/">The Snakemake docs</a></li>
</ul>


</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>from biostars: <a href="https://www.biostars.org/p/84686/" class="uri">https://www.biostars.org/p/84686/</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>more on anonymous functions here: <a href="http://adv-r.had.co.nz/Functional-programming.html#anonymous-functions" class="uri">http://adv-r.had.co.nz/Functional-programming.html#anonymous-functions</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>